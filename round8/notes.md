
# $Round$ $8$ $Notes$

## $T1$ $补图$

> ## 题目描述
> 
> 对于一张图 $G$，假设它有 $m$ 条边。设其边集为 $E=\{(x_i,y_i)\}_{1\leq i\leq m}$。定义它的补图 $G'$ 的边集为 $E'=\{(x,y)|\forall i,(x,y)\neq(x_i,y_i)\}$。
> 
> 给定一棵树 $T$，对于其补图 $T'$，求 $T'$ 中不经过重复点的最长路径的长度。每条边边权均为 $1$。
> 
> ## 输入格式
> 
> 第一行一个数 $n$，表示这棵树的点数。
> 
> 接下来 $n-1$ 行，每行两个整数 $x,y$，表示这棵树的一条边。
> 
> ## 输出格式
> 
> 一行一个整数，表示答案。
> 
> ## 样例 #1
> 
> ### 样例输入 #1
> 
> ```
> 4
> 1 2
> 2 3
> 3 4
> ```
> 
> ### 样例输出 #1
> 
> ```
> 3
> ```
> 
> ## 提示
> 
> 对于样例 1，其补图的边集为 $\{(1,3),(1,4),(2,4)\}$，一条满足要求的路径为 $2\to 4\to 1\to 3$。
> 
> 对于 $30\%$ 的数据，$n\leq 10$。
> 
> 对于另外 $30\%$ 的数据，$n\leq 500$。
> 
> 对于 $100\%$ 的数据，$n\leq 10^5$。

1. 菊花图： $n - 2$
  
2. 其他：$n - 1$
  
3. 特判：$n=1$
  

## $T2$ $树上选点$

> # 题目描述
> 
> 在做了 [[NOI2022] 众数](https://www.luogu.com.cn/problem/P8496) 之后，小 H 开始对研究元素的出现次数感兴趣了。
> 
> 他打算在树上选一些点，研究它们的出现次数。
> 
> 具体地，有一个 $n$ 个点的有根树，以 $1$ 为根，每个点有一个点权 $a_i$。
> 
> 定义 $j$ 属于 $i$ 的子树，当且仅当 $i$ 在 $1$ 到 $j$ 的简单路径上。令 $\operatorname{subtree(i)}$ 表示 $i$ 的子树。
> 
> 小 H 会选出一些点，将它们标为红色
> 
> 定义 $s(i)$ 为 $i$ 子树内所有红色结点的点权构成的**可重集**，即 $\{a_j |j \in \operatorname{subtree}(i) \land \text{j is red}\}$
> 
> 定义一个红色结点是好的，当且仅当 $a_i$ 在 $s(i)$ 中出现了至少 $k$ 次。
> 
> 现在小 H 想知道，有多少种选点方案，使得整棵树的好点个数在 $[L,R]$ 中。
> 
> 答案对 $10^9+7$ 取模。
> 
> ## 输入格式
> 
> 第一行四个整数 $n,L,R,k$，含义见题目描述。
> 
> 第二行 $n$ 个整数 $a_1,a_2,\dots,a_n$。
> 
> 第三行 $n - 1$ 个整数 $p_2,p_3,\dots,p_{n}$，$p_i$ 表示 $i$ 号点的父亲。
> 
> ## 输出格式
> 
> 一行一个整数，表示答案。
> 
> ## 样例 #1
> 
> ### 样例输入 #1
> 
> ```
> 4 1 2 2
> 1 1 1 1
> 1 2 1
> ```
> 
> ### 样例输出 #1
> 
> ```
> 9
> ```
> 
> ## 提示
> 
> 在样例 1 中，一种合法的情况是将 $2,3,4$ 号结点标为红色，其中 $2$ 的子树中共有 $2$ 个红点（$2,3$ 号结点）和它点权相同，可以算作好点。$1$ 的子树中虽然有 $3$ 个红色结点和它点权相同，但是由于 $1$ 本身没有被标红，所以不能算作好点。综上，好点数量为 $1$，满足条件。
> 
> 对于 $20\%$ 的数据，有 $1 \le n \le 20$。
> 
> 对于另外 $20\%$ 的数据，有 $1 \le n \le 100$。
> 
> 对于另外 $10\%$ 的数据，有 $1 \le n \le 500$。
> 
> 对于另外 $10\%$ 的数据，有 $p_i = i - 1$。
> 
> 对于另外 $20\%$ 的数据，有 $a_i \le 5$。
> 
> 对于 $100\%$ 的数据，有 $1 \le n \le 3000,1 \le a_i \le n,1 \le L \le R \le n,1 \le k \le n,1 \le p_i \lt i$。

1. 首先要发现，对于每一种颜色，是独立的。
  
2. 两种颜色，0和1。
  
3. 设 $f(x,i,a)$ 表示 $x$ 的子树里有 $i$ 个红色节点，有 $a$ 个好点。
  
4. $\Rightarrow$ 合并子树： $f(x,i+j,a+b)\Leftarrow f(x,i,a),f(x,j,b)$。
  
5. $x$ 的颜色是 $1$ ：
  
  1. $x$ 是不是红的
    
  2. $x$ 是不是好点
    

- $f(x,i,j) \Rightarrow f(x,i,j)$
  
- $f(x,i,j)\Rightarrow f(x,i+1,j+(i+1\ge m))$
  

   6. 固定一个，枚举另外两个。

## $T3$ $送快递$

> ## 题目描述
> 
> 小 H 和小 S 打算合作送快递！
> 
> 街道可以抽象成一条数轴，一开始小 H 和小 S 都在原点。
> 一共有 $n$ 个时刻的快递任务，只有完成了前一个送快递任务才可以去完成下一个。
> 
> 第 $i$ 个时刻，小 H 和小 S 中的一个人要将快递送往位置 $k_i$，送完快递后，那个人将停留在位置 $k_i$。
> 
> 请问如何分配二人送快递的任务才能使得两人送快递走过的总路程之和最小？
> 
> ## 输入格式
> 
> 第一行一个 $n$ 表示任务个数。
> 
> 接下来一行 $n$ 个整数表示 $k_1$，$k_2$，$\cdots$，$k_n$。
> 
> ## 输出格式
> 
> 输出一行一个整数表示答案。
> 
> ## 样例 #1
> 
> ### 样例输入 #1
> 
> ```
> 5
> 4 6 3 4 7
> ```
> 
> ### 样例输出 #1
> 
> ```
> 11
> ```
> 
> ## 样例 #2
> 
> ### 样例输入 #2
> 
> ```
> 10
> 10 16 20 17 8 7 14 12 19 6
> ```
> 
> ### 样例输出 #2
> 
> ```
> 45
> ```
> 
> ## 提示
> 
> 对于第一个样例，可以安排小 H 去送第 $1,2,5$ 个时刻的任务，走过的总路程为
> $|4−0|+|6−4|+|7−6| = 7$；
> 
> 剩下的安排小 S 去送，走过的总路程为 $|3−0|+|4−3| = 4$。
> 
> 二人走过的总路程为 $11$，可以证明这是最小的总路程。
> 
> # 数据范围
> 
> 对于所有测试点，满足 $1 \leq n \leq 10^6, 1 \leq k_i \leq 10^9$。
> 
> | 测试点编号 | $n \leq$ | 特殊性质 |
> | --- | --- | --- |
> | $1,2,3,4$ | $20$ | /   |
> | $5,6$ | $100$ | /   |
> | $7,8,9,10$ | $1000$ | /   |
> | $11,12,13,14$ | $10^5$ | /   |
> | $15,16$ | $10^6$ | $1 \leq k_i \leq 50$ |
> | $17,18,19,20$ | $10^6$ | /   |

1. 直接dp。
  
2. 线段树维护。
  

## $T4$ $送奶牛回家$

> ## 题目背景
> 
> 你玩过《送小羊回家》吗？
> 
> ## 题目描述
> 
> 在一个草原上有 $m$ 只奶牛。现在 Farmer John 要指挥它们回到自己的家。草原被划分成了 $n\times n$ 的网格，第 $i$ 个奶牛一开始在 $(a_i, b_i)$，它的家在 $(c_i, d_i)$。保证每个奶牛的初始位置不同，并且每个奶牛的家的位置不同。FJ 每次可以呼喊一头奶牛走到它的某一个相邻格子上，但是不能让两只奶牛同时在一个格子中，否则它们就会发生冲突。奶牛也是有脾气的，如果 FJ 呼喊它们的次数太多，那么奶牛们就会闹脾气。FJ 希望你来帮他，他会根据你的呼喊次数来对你的策略评分。
> 
> ## 输入格式
> 
> 第一行两个正整数 $n,m$，分别表示网格的大小，奶牛数量。
> 
> 接下来 $m$ 行每行两个整数 $a_i,b_i$。
> 
> 接下来 $m$ 行每行两个整数 $c_i,d_i$。
> 
> ## 输出格式
> 
> 第一行一个整数 $K$，表示你的呼喊次数。
> 
> 接下来 $K$ 行每行四个整数 $x, y, x', y'$，表示让 $(x, y)$ 上的奶牛走到 $(x', y')$。
> 
> 你需要保证 $1\leq x,y,x',y'\leq n$ 并且 $|x-x'|+|y-y'|=1$。
> 
> ## 提示
> 
> 本题不提供样例，但会下发 `checker.cpp` 和简易的数据生成器，可以根据自己需要来修改。
> 
> 记 $C$ 为 FJ 的评分系数。
> 
> 本题共有 $20$ 个测试点，对于所有测试点：$n=50$，$C=2\times 10^5$。
> 
> 对于测试点 $1$ 到 $6$，$m=50$。
> 
> 对于测试点 $7$ 到 $14$，记 $id$ 为该测试点编号，$m=(id-6)\times150$。
> 
> 对于测试点 $15$ 到 $20$，$m=1600$。
> 
> 对于一个测试点：
> 
> 若你的策略不合法或输出的 $K > 10^6$。那么你会获得 $0$ 分。
> 
> 否则你会获得 $\left\lfloor5\times\min\left(1,\frac{C}{K}\right)\right\rfloor$ 分。
> 
> ---
> 
> checker 的使用方法：
> 
> 首先用 `checker.cpp` 编译出一个可执行文件（比如叫做 `checker`），然后将输入文件 `sheep.in`，输出文件 `sheep.out`，答案文件 `sheep.ans` 放在同一目录下。（本题 checker 不需要答案文件，所以放一个空文件命名为 `sheep.ans` 即可）
> 
> 然后用命令 `./checker sheep.in sheep.out sheep.ans` 即可检查你的答案。（此为 linux 下的命令，如果是 windows 试着把 `./` 去掉）
